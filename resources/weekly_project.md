# Python潮流周刊自动化工作流

## 功能概述

自动化处理 Python潮流周刊 的发布流程，包括内容拆分、字数统计、摘要生成、文件归档和消息推送等任务。

## 工作流程

1. ✓ 更新 README.md
   - 从原始周刊文件中提取期号和标题
   - 在"往期列表"部分添加新的周刊链接

2. ✓ 拆分中英文版本
   - 分离中英文标题，生成中文版（覆盖原文件），生成英文版（保存到 tmp 目录）

3. ✓ 统计和更新字数
   - 统计中文版的字数（不含链接URL和元数据）
   - 更新文件中的统计数据

4. ✓ 归档中文完整版
   - 复制更新了字数的中文完整版到 ebook 目录

5. ✓ 生成摘要版本
   - 生成博客版本
     * 保留完整的元数据
     * 包含摘要内容和固定文本
   - 生成 GitHub 版本
     * 简化的元数据
     * 包含摘要内容和固定文本

6. ✓ 摘要发送到 Telegram
   - 组装消息内容（标题、摘要、页脚、频道信息）+ 图片

7. 代码推送到仓库
   - 周刊文件推送到周刊代码仓
   - 博客文件推送到博客代码仓

8. 周刊发布到各大平台
   - 周刊完整版发布到：小报童、爱发电、FlowUs
   - 周刊摘要版发布到其它博客平台
   - 周刊海报和预览版发布到推特、即刻等平台

## 环境要求

- 环境变量：
  * TG_BOT_TOKEN：Telegram 机器人 token
  * TG_CHAT_ID：目标频道 ID

## 使用方法

1. 准备原始周刊文件
   - 按格式编写中英双语版本，保存到 docs 目录
   - 文件名格式：YYYY-MM-DD-weekly.md

2. 运行工作流脚本
   ```bash
   # 处理指定日期的周刊
   python resources/weekly_workflow.py YYYY-MM-DD
   
   # 处理当天的周刊
   python resources/weekly_workflow.py
   ```
